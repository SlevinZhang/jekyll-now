---
layout: post
title: 闭包和装饰器
---
闭包：指引用了自由变量的函数，这个函数和自由变量一同存在，即使函数的生命周期已经结束，自由变量依旧存在。
同时，闭包也是函数和自由变量共同组成的实体。一个闭包可以因为自由变量的值不同而和函数组成不同的实体。  
在Python中，一个闭包就是你调用了函数A，而函数A给你返回一个函数B，返回的这个函数叫做闭包，其不仅返回的
是函数本身，也包含着与函数有关的自由变量。  
PS：  
1. 不能再闭包中修改自由变量  
2. python 3中使用 nonlocal 可以在闭包中修改自由变量  
  
装饰器：将被装饰的函数以参数传递的方式传递给对应的函数， 并将被装饰的函数返回给原函数，也就是说下次我们
再调用原函数时，我们调用的将是被装饰器装饰过的函数。  
装饰器其实是闭包的一个应用，只是这个自由变量成为了原函数，而不是一个随机什么都可以的变量。 
也就是，当我们将传递到父函数中的自由变量变成函数的时候，我们就相当于定义了一个装饰器。  

闭包的作用：  
1. 有一些没有必要使用类，可以通过使用闭包来实现  
2. 闭包在函数执行完之后，其作用域就被释放，而类内的变量，要一直等到程序执行完毕，或者手动释放内存
